{"version":3,"file":"static/js/364.ecaae763.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/shared/components/SearchForm/search-form.module.scss?1032","shared/components/SearchForm/SearchForm.jsx","pages/MoviesPage/movies-page.module.scss","pages/MoviesPage/MoviesPage.jsx","shared/components/MoviesList/MoviesList.jsx","shared/services/movies.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"searchForm\":\"search-form_searchForm__YQ8x9\"};","import { useState, useEffect, createRef, memo } from \"react\";\nimport s from \"./search-form.module.scss\"\n\nconst SearchForm = ({onSubmit}) => {\n    // console.log(\"Render\")\n    \n    const [form, setForm] = useState({\n        search: \"\"\n    });\n\n    const inputRef = createRef(null);\n\n    useEffect(()=> {\n        if(inputRef.current) {\n            inputRef.current.focus()\n        }\n    }, [inputRef]);\n\n    const handleChange = ({target}) => {\n        const {name, value} = target;\n        setForm(prevState => {\n            return {\n                ...prevState,\n                [name]: value\n            }\n        });\nconsole.log(form.search)\n    }\n\n    const handleSubmit = (e)=> {\n        e.preventDefault();\n        onSubmit(form);\n        setForm({\n            search: \"\"\n        });\n        console.log(form.search); \n    }\n\n    return (\n        <form className={s.searchForm } onSubmit={handleSubmit} action=\"\">\n            <input ref={inputRef} onChange={handleChange} value={form.search} type=\"text\" name=\"search\" placeholder=\"Movie title\" />\n            <button type=\"submit\">Search</button>\n        </form>\n    )\n}\n\nexport default memo(SearchForm);","// extracted by mini-css-extract-plugin\nexport default {};","import { useState, useEffect, useCallback } from \"react\";\n// import { useRef } from \"react\";\n// import MoviesList from \"pages/MoviesList\";\nimport { searchMovies } from \"../../shared/services/movies\";\nimport MoviesList from \"shared/components/MoviesList\";\nimport SearchForm from \"shared/components/SearchForm\";\nimport s from \"./movies-page.module.scss\";\n\nconst MoviesPage = () => {\n    const [state, setState] = useState({\n        query: \"\",\n        movies: [],\n        loading: false,\n        err: null\n    });\n    const { query, movies, loading, error } = state;\n\n    // const firstRenderRef = useRef(true);\n\n    useEffect(() => {\n\n    //     if (firstRenderRef.current) {\n    // firstRenderRef.current = false;\n    //     }\n        if(!query){\n   return;\n}\n        else {\n            const fetchMovies = async () => {\n                                   \n            try {\n                setState(prevState => ({ ...prevState, loading: true }))\n                const data = await searchMovies(query);\n                \n                console.log(data);\n                \n                setState(prevState => ({\n                    ...prevState,\n                    movies: [...data.results],\n                    loading: false\n                }))\n            } catch (error) {\n                setState(prevState => ({ ...prevState, loading: false, error }))\n            }\n        };\n        fetchMovies();}        \n        \n    }, [query]);\n\n    const changeQuery = useCallback(({ search }) => {\n        setState({\n            ...state,\n            query: search\n        }\n           \n        )\n        // console.log(search);\n        // console.log(query);\n        \n    }, [state]);\n\n\n    return (\n        <main>\n            <div className=\"container\">\n <div className={s.searchContainer}>\n                <SearchForm onSubmit={changeQuery} />\n            </div>\n            \n            {error && <h2>Search error</h2>}\n            {!movies.length && query && !loading && !error && <h2>We don't have any movies for this search</h2>}\n                \n                {loading && <p>...Loading</p>}\n                {Boolean(movies.length) && <MoviesList movies={movies} />}\n            </div>\n        </main>\n        \n    )\n}\n\nexport default MoviesPage;","import PropTypes from 'prop-types';\n\nimport { Link } from \"react-router-dom\";\n// import s from \"./movies-list.module.scss\"\n\n\nconst MoviesList = ({ movies }) => {\n    const elements = movies.map(movie => (\n        <Link to={`/movies/${movie.id}`} key={movie.id}>\n            <li className=\"list-item\" >\n{movie.title}\n            </li>\n        </Link>\n        \n    ))\n    return (\n        <div>\n      \n        <ul>\n            {elements}\n            </ul>\n        </div>\n    )\n};\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,      \n    })\n  ),\n  };\n\n\nexport default MoviesList;","import axios from \"axios\";\n\nconst instance = axios.create({\n    baseURL: \"https://api.themoviedb.org/3\",\n     \n    params: {\n        api_key: \"f05a275bd04be2a259f3c9758d33fde7\",\n        language: \"en-US\",\n    }\n});\n\nexport const getMovies = async () => {\n    const { data } = await instance.get(\"/trending/movie/day\");\n    return data;\n};\n\nexport const getMovieDetails = async movieId => {\n    const { data } = await instance.get(`/movie/${movieId}`);\n    return data;\n};\n\nexport const getMovieCredits = async movieId => {\n    const { data } = await instance.get(`/movie/${movieId}/credits`);\n    return data;\n};\n\nexport const getMovieReviews = async movieId => {\n    const { data } = await instance.get(`/movie/${movieId}/reviews`);\n    return data;\n};\nexport const searchMovies = async query => {\n    const { data } = await instance.get(`/search/movie`, {\n        params: {\n            query,            \n        }\n    });\n    return data;\n};"],"names":["SearchForm","onSubmit","useState","search","form","setForm","inputRef","createRef","useEffect","current","focus","className","s","e","preventDefault","console","log","action","ref","onChange","target","name","value","prevState","type","placeholder","memo","query","movies","loading","err","state","setState","error","fetchMovies","searchMovies","data","results","changeQuery","useCallback","length","Boolean","MoviesList","elements","map","movie","to","id","title","instance","axios","baseURL","params","api_key","language","getMovies","get","getMovieDetails","movieId","getMovieCredits","getMovieReviews"],"sourceRoot":""}